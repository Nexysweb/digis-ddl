(this["webpackJsonp@nexys/digis-ddl"]=this["webpackJsonp@nexys/digis-ddl"]||[]).push([[0],{110:function(e,t,n){e.exports=n(232)},129:function(e,t){},131:function(e,t){},165:function(e,t){},166:function(e,t){},232:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(104),i=n.n(o),l=n(2),s=n.n(l),c=["Int","Long","Double","LocalDateTime","LocalDate","Boolean","BigDecimal","String"],u=s.a.object().keys({name:s.a.string().alphanum().required(),column:s.a.string().optional(),type:s.a.string().alphanum().required(),optional:s.a.boolean(),permissions:s.a.array().optional(),description:s.a.string().optional()}),m=s.a.object().keys({name:s.a.string().alphanum().required(),uuid:s.a.boolean().optional(),table:s.a.string().optional(),description:s.a.string().optional(),fields:s.a.array().items(u).unique((function(e,t){return e.name===t.name})).required(),permissions:s.a.array().optional(),constraints:s.a.array()}),f=s.a.array().items(m).required(),d=function(e){var t=f,n=s.a.validate(e,t,{abortEarly:!1});if(null===n.error){var r=function(e){console.log(typeof e);var t=[],n=e.map((function(e){return t=t.concat(e.fields.map((function(e){return e.type})).filter((function(e){return c.indexOf(e)<0}))),e.name}));console.log(n);var r=[];return t.map((function(e){return n.indexOf(e)<0&&r.push('"'.concat(e,'" is referenced as a type in params but was never defined')),!0})),r}(JSON.parse(e));return r.length>0?{status:!1,errors:r}:{status:!0,errors:null}}return{status:!1,errors:n.error.details.map((function(e){return e.message+" "+JSON.stringify(e.path)}))}},p=function e(t,n,r){if(!t)return!0;var a=Object.keys(t);return 0===a.length||a.map((function(a){var o=n.fields.find((function(e){return e.name===a}));if(!o)return console.error('In entity "'.concat(n.name,'", the field "').concat(a,'" does not exist')),!1;var i=t[a];if("object"===typeof i){var l=h(o.type,r);return!!l&&e(i,l,r)}return!0})).reduce((function(e,t){return!(!e||!t)}))},h=function(e,t){var n=t.find((function(t){return t.name===e}));return n||console.error('The entity "'.concat(e,'" could not be found in model')),n},g=function(e,t){return Object.keys(e).map((function(n){var r=h(n,t);if(r){var a=p(e[n].projection,r,t);return!(!p(e[n].filters,r,t)||!a)}return!1})).reduce((function(e,t){return!(!e||!t)}))},y=n(105),v=n(106),b=n(108),E=n(107),k=n(109),j=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},w=function(e){return function(t){return function(t){function n(t){var r;return Object(y.a)(this,n),(r=Object(b.a)(this,Object(E.a)(n).call(this,t))).handleSubmit=function(){var t=r.state.content;if(j(t)){var n=e(t);if(console.log(n),n.errors)r.setState({errors:n.errors,message:null});else{r.setState({errors:null,message:"Congratulations, this is a valid file"})}}else{r.setState({errors:["the string you entered is not a JSON string, try again"],message:null})}},r.handleChange=function(e){var t=e.target.value;r.setState({content:t})},r.state={content:"",errors:null},r}return Object(k.a)(n,t),Object(v.a)(n,[{key:"renderError",value:function(){var e=this.state.errors;return e?a.a.createElement("ul",{className:"list-group"},e.map((function(e,t){return a.a.createElement("li",{className:"list-group-item list-group-item-danger",key:t},e)}))):null}},{key:"renderSuccess",value:function(){var e=this.state.message;return e?a.a.createElement("p",{className:"alert alert-success"},e):null}},{key:"render",value:function(){var e=this.state.content;return a.a.createElement(a.a.Fragment,null,this.renderError(),this.renderSuccess(),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-12"},a.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e,onChange:this.handleChange}))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleSubmit},"Validate"))))}}]),n}(a.a.Component)}},N=w((function(e){var t=d(e);return t&&!t.status?{errors:["the string you entered is not a properly formatted DDL file, try again"].concat(t.errors.map((function(e){return e})))}:t}))((function(){})),S=w((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.a.object().pattern(/\w/,s.a.alternatives().try(s.a.boolean(),s.a.number(),s.a.string(),s.a.array(),s.a.lazy((function(){return n})))),r=s.a.object().pattern(/\w/,s.a.object().keys({params:n.optional(),projection:n.optional(),references:n.optional(),filters:n.optional(),take:s.a.number().optional(),skip:s.a.number().optional(),order:n.optional()})),a={abortEarly:!1,allowUnknown:!1},o=s.a.validate(e,r,a);return o.error?(console.error(JSON.stringify(o.error)),!1):!t||g(e,t)}(e);return t||{errors:["the query is invalid, refer to the console for more details"]}}))((function(){}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement((function(){return a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"DDL Checker"),a.a.createElement("p",null,"Details ",a.a.createElement("a",{href:"../"},"here")),a.a.createElement("h2",null,"Schema Validation"),a.a.createElement(N,null),a.a.createElement("h2",null,"Query Validation"),a.a.createElement(S,null))}),null),document.getElementById("appcontainer")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[110,1,2]]]);
//# sourceMappingURL=main.27fba64e.chunk.js.map