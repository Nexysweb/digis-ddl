(this["webpackJsonp@nexys/digis-ddl"]=this["webpackJsonp@nexys/digis-ddl"]||[]).push([[0],{120:function(e,t,n){e.exports=n(249)},146:function(e,t){},148:function(e,t){},182:function(e,t){},183:function(e,t){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(112),i=n.n(o),l=n(23),c=n(10),s=n(36),u={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},m=[{link:"/validate/schema",name:"Validate Schema"},{link:"/validate/query",name:"Validate Query"},{link:"/openApi",name:"Open Api Conversion"}],d=function(e){var t=r.a.createElement("header",null,r.a.createElement("div",{style:u,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},r.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},r.a.createElement(s.a,{to:"/"},"Digis DDL")),r.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},m.map((function(e,t){return r.a.createElement(s.a,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return r.a.createElement(r.a.Fragment,null,t,r.a.createElement("div",{className:"container"},e.children))},p=function(e){var t="fa fa-"+e.name;return r.a.createElement("i",{className:t})},f=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"DDL Checker"),r.a.createElement("p",null,"Use the menu to explore the different functionalities of the package"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/Nexysweb/digis-ddl"},r.a.createElement(p,{name:"code"})," Source")," under MIT license"))},h=n(3),v=n.n(h),g=["Int","Long","Double","LocalDateTime","LocalDate","Boolean","BigDecimal","String"],y=v.a.object().keys({name:v.a.string().alphanum().required(),column:v.a.string().optional(),type:v.a.string().alphanum().required(),optional:v.a.boolean(),permissions:v.a.array().optional(),description:v.a.string().optional()}),E=v.a.object().keys({name:v.a.string().alphanum().required(),uuid:v.a.boolean().optional(),table:v.a.string().optional(),description:v.a.string().optional(),fields:v.a.array().items(y).unique((function(e,t){return e.name===t.name})).required(),permissions:v.a.array().optional(),constraints:v.a.array()}),b=v.a.array().items(E).required(),N=function(e){var t=b,n=v.a.validate(e,t,{abortEarly:!1});if(null===n.error){var a=function(e){console.log(typeof e);var t=[],n=e.map((function(e){return t=t.concat(e.fields.map((function(e){return e.type})).filter((function(e){return g.indexOf(e)<0}))),e.name}));console.log(n);var a=[];return t.map((function(e){return n.indexOf(e)<0&&a.push('"'.concat(e,'" is referenced as a type in params but was never defined')),!0})),a}(JSON.parse(e));return a.length>0?{status:!1,errors:a}:{status:!0,errors:null}}return{status:!1,errors:n.error.details.map((function(e){return e.message+" "+JSON.stringify(e.path)}))}},k=n(115),x=n(116),O=n(118),w=n(117),S=n(119),j=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},D=function(e){return function(t){return function(t){function n(t){var a;return Object(k.a)(this,n),(a=Object(O.a)(this,Object(w.a)(n).call(this,t))).handleSubmit=function(){var t=a.state.content;if(j(t)){var n=e(t);if(console.log(n),n.errors)a.setState({errors:n.errors,message:null});else{a.setState({errors:null,message:"Congratulations, this is a valid file"})}}else{a.setState({errors:["the string you entered is not a JSON string, try again"],message:null})}},a.handleChange=function(e){var t=e.target.value;a.setState({content:t})},a.state={content:"",errors:null},a}return Object(S.a)(n,t),Object(x.a)(n,[{key:"renderError",value:function(){var e=this.state.errors;return e?r.a.createElement("ul",{className:"list-group"},e.map((function(e,t){return r.a.createElement("li",{className:"list-group-item list-group-item-danger",key:t},e)}))):null}},{key:"renderSuccess",value:function(){var e=this.state.message;return e?r.a.createElement("p",{className:"alert alert-success"},e):null}},{key:"render",value:function(){var e=this.state.content;return r.a.createElement(r.a.Fragment,null,this.renderError(),this.renderSuccess(),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleSubmit},"Validate"))))}}]),n}(r.a.Component)}},q=D((function(e){var t=N(e);return t&&!t.status?{errors:["the string you entered is not a properly formatted DDL file, try again"].concat(t.errors.map((function(e){return e})))}:t}))((function(){})),C=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Schema Validation"),r.a.createElement(q,null))},A=function e(t,n,a){if(!t)return!0;var r=Object.keys(t);return 0===r.length||r.map((function(r){var o=n.fields.find((function(e){return e.name===r}));if(!o)return console.error('In entity "'.concat(n.name,'", the field "').concat(r,'" does not exist')),!1;var i=t[r];if("object"===typeof i){var l=I(o.type,a);return!!l&&e(i,l,a)}return!0})).reduce((function(e,t){return!(!e||!t)}))},I=function(e,t){var n=t.find((function(t){return t.name===e}));return n||console.error('The entity "'.concat(e,'" could not be found in model')),n},J=function(e,t){return Object.keys(e).map((function(n){var a=I(n,t);if(a){var r=A(e[n].projection,a,t);return!(!A(e[n].filters,a,t)||!r)}return!1})).reduce((function(e,t){return!(!e||!t)}))},B=D((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=v.a.object().pattern(/\w/,v.a.alternatives().try(v.a.boolean(),v.a.number(),v.a.string(),v.a.array(),v.a.lazy((function(){return n})))),a=v.a.object().pattern(/\w/,v.a.object().keys({params:n.optional(),projection:n.optional(),references:n.optional(),filters:n.optional(),take:v.a.number().optional(),skip:v.a.number().optional(),order:n.optional()})),r={abortEarly:!1,allowUnknown:!1},o=v.a.validate(e,a,r);return o.error?(console.error(JSON.stringify(o.error)),!1):!t||J(e,t)}(e);return t||{errors:["the query is invalid, refer to the console for more details"]}}))((function(){})),L=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Query Validation"),r.a.createElement(B,null))},V=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Open Api V3"),r.a.createElement("p",null,"Based on ",r.a.createElement("a",{href:"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md"},"OpenAPI Specification")),r.a.createElement("p",null,r.a.createElement("b",null,"TODO")))},T=function(){return r.a.createElement("p",null,"Page Not Found")};var F=Object(l.f)((function(e){return r.a.createElement(d,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:f}),r.a.createElement(l.a,{exact:!0,path:"/validate/schema",component:C}),r.a.createElement(l.a,{exact:!0,path:"/validate/query",component:L}),r.a.createElement(l.a,{exact:!0,path:"/openApi",component:V}),r.a.createElement(l.a,{path:"/",component:T})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=c.a({basename:"/digis-ddl"});i.a.render(r.a.createElement(l.b,{history:P},r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[120,1,2]]]);
//# sourceMappingURL=main.f11f382e.chunk.js.map